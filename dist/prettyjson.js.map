{"version":3,"sources":["../lib/prettyjson.js"],"names":["require","isArray","isObjectLike","each","isEmpty","keys","getOptions","getPrintColor","settingsInit","init","parse","pColor","maxSortDepth","currSortDepth","_sortKeys","data","parentIsArray","sortedData","numberArrays","sort","key","push","customOptions","render","startIndent","alphabetizeKeys","renderString","output","parsedData","beginningOfJson","indexOf","string","substr","JSON","e","error","exports","module"],"mappings":"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","file":"prettyjson.js","sourcesContent":["const { isArray, isObjectLike, each, isEmpty, keys } = require('lodash');\nconst { getOptions, getPrintColor, init: settingsInit } = require('./settings');\nconst parse = require('./parser');\n\nlet pColor = getPrintColor();\n\nconst maxSortDepth = 20;\nlet currSortDepth = 0;\nconst _sortKeys = (data, parentIsArray) => {\n  let sortedData = parentIsArray && !getOptions().numberArrays ? [] : {};\n  each(keys(data).sort(), (key) => {\n    // continue recursion if item is object and not exceeding maximum depth\n    if (isObjectLike(data[key]) && currSortDepth < maxSortDepth) {\n      currSortDepth++;\n      if (isArray(data[key])) {\n        sortedData[key] = _sortKeys(data[key], (!getOptions().numberArrays));\n      } else {\n        sortedData[key] = _sortKeys(data[key]);\n      }\n    } else {\n      if (isArray(sortedData)) {\n        sortedData.push(data[key]);\n      } else {\n        sortedData[key] = data[key];\n      }\n    }\n  });\n  currSortDepth--;\n  return sortedData;\n};\n\nconst init = (customOptions = {}) => {\n  settingsInit(customOptions);\n  return render;\n};\n\nconst render = (data, startIndent = 0, customOptions = {}) => {\n  !isEmpty(customOptions) && settingsInit(customOptions);\n  if (getOptions().alphabetizeKeys) {\n    data = _sortKeys(data, isArray(data));\n  }\n\n  return parse(data, startIndent);\n};\n\nconst renderString = (data, customOptions) => {\n  // called from direct entry of cli\n  !isEmpty(customOptions) && settingsInit(customOptions);\n\n  let output = '';\n  let parsedData;\n\n  if (typeof data !== 'string' || data === '') {\n    return '';\n  }\n\n  if (data[0] !== '{' && data[0] !== '[') {\n    let beginningOfJson =\n      data.indexOf('{') === -1\n      ? data.indexOf('[')\n      : data.indexOf('[') === -1\n      ? data.indexOf('{')\n      : data.indexOf('{') < data.indexOf('[')\n      ? data.indexOf('{')\n      : data.indexOf('[');\n    output += pColor.string(data.substr(0, beginningOfJson)) + '\\n';\n    data = data.substr(beginningOfJson);\n  }\n\n  try {\n    parsedData = JSON.parse(data);\n  } catch (e) {\n    return pColor.error('Error:') + ' Not valid JSON!';\n  }\n\n  output += exports.render(parsedData);\n  return output;\n};\n\nexports = module.exports = {\n  renderString,\n  render,\n  init\n};\n"]}